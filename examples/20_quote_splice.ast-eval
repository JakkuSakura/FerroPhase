ast::File {
  items:
    pub fn apply_ops(const ops: [Expr(i32)], x: Expr(i32), limit: Expr(i32)) -> Expr(i32) : fn([i32], i32, i32) -> i32 : fn([i32], i32, i32) -> i32
      block (2 stmts) : i32
        expr_stmt (value)
          for : ()
            iter:
              invoke : Vec<(i64, i32)>
                target: ops.iter().enumerate
            body:
              block (3 stmts) : ()
                expr_stmt (value)
                  if : ()
                    cond:
                      binop == : bool
                        lhs:
                          binop % : i32
                            lhs:
                              locator op : i32
                            rhs:
                              value 2 : i64
                        rhs:
                          value 0 : i64
                    then:
                      block (1 stmt) : ()
                        expr_stmt ;
                          block (2 stmts) : ()
                            expr_stmt ;
                              assign : i32
                                target:
                                  locator x : i32
                                value:
                                  binop + : i32
                                    lhs:
                                      locator x : i32
                                    rhs:
                                      locator op : i32
                            expr_stmt ;
                              value () : ()
                    else:
                      block (1 stmt) : ()
                        expr_stmt ;
                          assign : i32
                            target:
                              locator x : i32
                            value:
                              binop + : i32
                                lhs:
                                  locator x : i32
                                rhs:
                                  locator op : i32
                expr_stmt ;
                  block (2 stmts) : ()
                    expr_stmt ;
                      intrinsic println : ()
                        template: "step {}: {}" i, x
                    expr_stmt ;
                      value () : ()
                expr_stmt ;
                  if : ()
                    cond:
                      binop >= : bool
                        lhs:
                          locator x : i32
                        rhs:
                          locator limit : i32
                    then:
                      block (1 stmt) : ()
                        expr_stmt ;
                          intrinsic return : !
                            args:
                              locator x : i32
        expr_stmt (value)
          locator x : i32
    pub fn main() -> () : fn() -> () : fn() -> ()
      block (9 stmts) : ()
        expr_stmt ;
          intrinsic println : ()
            template: "ðŸ“˜ Tutorial: 20_quote_splice.fp"
        expr_stmt ;
          intrinsic println : ()
            template: "ðŸ§­ Focus: Quote, splice, and emit: staged code generation with runtime output."
        expr_stmt ;
          intrinsic println : ()
            template: "ðŸ§ª What to look for: labeled outputs below"
        expr_stmt ;
          intrinsic println : ()
            template: "âœ… Expectation: outputs match labels"
        expr_stmt ;
          intrinsic println : ()
            template: ""
        let result1
          init:
            invoke : i32
              target: apply_ops
              args:
                array (4 values) : [i32; 4]
                  value 1 : i64
                  value 2 : i64
                  value 3 : i64
                  value 4 : i64
                value 0 : i32
                value 6 : i32
        expr_stmt ;
          intrinsic println : ()
            template: "result1={}" result1
        let result2
          init:
            invoke : i32
              target: apply_ops
              args:
                array (3 values) : [i32; 3]
                  value 5 : i64
                  unop - : i64
                    value:
                      value 2 : i64
                  value 7 : i64
                value 10 : i32
                value 30 : i32
        expr_stmt ;
          intrinsic println : ()
            template: "result2={}" result2
}
